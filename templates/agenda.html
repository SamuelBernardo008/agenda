{% extends "base.html" %}
{% block content %}

<a href="/" id="voltar">
  <span class="material-symbols-outlined">arrow_back</span>
</a>

<div class="subtitulo">
    <h2>Lista Digital</h2>
</div>

{# Lógica do Formulário: Alterna entre Criar e Atualizar #}
<form method="POST" 
      action="{{ url_for('update', idTarefa=tarefa_selecionada.id) if tarefa_selecionada else url_for('agenda') }}">

    <input 
        type="text" 
        name="titulo-tarefa"
        placeholder="Título da tarefa"
        required
        value="{{ tarefa_selecionada.titulo_tarefa if tarefa_selecionada else '' }}"
    >

    <input 
        type="date"
        name="data-conclusao"
        value="{{ tarefa_selecionada.data_conclusao if tarefa_selecionada else '' }}"
    >

    <button type="submit">
        {{ 'Atualizar' if tarefa_selecionada else 'Salvar' }}
    </button>
</form>

{% if tarefa_selecionada %}
    <a href="{{ url_for('agenda') }}">Cancelar Edição</a>
{% endif %}

<hr>

<h2>Lista de Tarefas</h2>
<ul>
    {% for tarefa in tarefas %}
    <li>
        {{ tarefa.titulo_tarefa }} - {{ tarefa.data_conclusao }}
        <a href="{{ url_for('update', idTarefa=tarefa.id) }}">Editar</a>
        <a href="{{ url_for('delete', idTarefa=tarefa.id) }}">Excluir</a>
    </li>
    {% endfor %}
</ul>

{% endblock %}